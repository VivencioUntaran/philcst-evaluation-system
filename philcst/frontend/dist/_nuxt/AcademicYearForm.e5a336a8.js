import{_ as B,s as $,u as E,r as _,v as k,q as M,o as r,c as d,a as e,t as l,x as o,y as N,z as p,A as R,B as S,C as x,F as y,D as g,E as P,b as Y,w as G,d as H,e as L,p as O,f as J}from"./entry.b4168997.js";import{u as K}from"./useAPI.05844c13.js";const c=u=>(O("data-v-b8551daa"),u=u(),J(),u),Q={class:"ay-form bgCard"},W=["onSubmit"],X={class:"ay-form__group d-flex flex-column w-100 m-2"},Z=c(()=>e("label",{for:"year"}," Year * ",-1)),ee={class:"d-flex justify-content-between"},te={class:"ay-form__group w-100 m-2"},se=c(()=>e("label",{for:"semester"}," Semester * ",-1)),ae=c(()=>e("option",{value:"",selected:"",disabled:""}," Select Semester ",-1)),oe={class:"ay-form__group w-100 m-2"},ne=c(()=>e("label",{for:"status"}," Status * ",-1)),re=c(()=>e("option",{value:"",selected:"",disabled:""}," Select Status ",-1)),de={class:"ay-form__group w-100 m-2"},ce=c(()=>e("label",{for:"system_default"}," System Default * ",-1)),ie=c(()=>e("option",{value:"",selected:"",disabled:""}," Select System Default ",-1)),le={key:0,class:"ay-form__error-container"},ue={class:"text-danger"},me={class:"ay-form__button-container d-flex justify-content-end"},_e={class:"m-3"},pe=c(()=>e("button",{type:"submit",class:"m-2"}," Submit ",-1)),ye={__name:"AcademicYearForm",props:{formType:{type:String,default:"create"}},setup(u){const f=u,h=K(),C=$(),D=E(),F=_(!1);let V=k({});const v=_(!1),T=_("Create");M(async()=>{await I(),F.value=!0});async function I(){f.formType!=="create"&&(v.value=!0,await U())}const b={semesters:["1st","2nd"],statuses:["open","closed"],systemDefaults:["yes","no"]},t=k({year:"",semester:"",status:"",system_default:"no"}),w=_("");async function A(){var s,i;const n={...t,year:t.year.trim(),status:t.status};t.system_default==="no"&&(n.status="closed");try{const a=await h({url:"/admin/academic-years/create",method:"POST",headers:{"Content-Type":"application/json"},data:n});alert("Academic year has been saved"),C.push("/admin/academic-year")}catch(a){w.value=(i=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:i.errors}}async function U(){const n=D.params.academicYearId;try{const s=await h({url:`/admin/academic-years/${n}/show`,method:"GET",headers:{"Content-Type":"application/json"}});V=s.data.record,j(s.data.record)}catch(s){console.log(s)}}function j(n){t.year=n.year,t.semester=n.semester,t.status=n.status,t.system_default=n.system_default,T.value=`Update ${t.year} (${t.semester} Semester)`}async function q(){const n=D.params.academicYearId,s={...t,status:t.status};t.system_default==="no"&&(s.status="closed");try{const i=await h({url:`admin/academic-years/${n}/update`,method:"PATCH",headers:{"Content-Type":"application/json"},data:s});alert("Data has been updated"),C.push("/admin/academic-year")}catch(i){console.log(i)}}async function z(){f.formType==="create"?await A():await q()}return(n,s)=>{const i=L;return r(),d(y,null,[e("h1",null,l(o(T)),1),e("div",Q,[e("form",{onSubmit:N(z,["prevent"])},[e("div",X,[Z,p(e("input",{type:"text",placeholder:"ex: 2023-2024","onUpdate:modelValue":s[0]||(s[0]=a=>o(t).year=a),required:"",name:"year",class:S([["ay-form__input",o(v)&&"ay-form__input--disabled"],"w-100 p-1"])},null,2),[[R,o(t).year]])]),e("div",ee,[e("div",te,[se,p(e("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>o(t).semester=a),required:"",name:"semester",class:S([["ay-form__input",o(v)&&"ay-form__input--disabled"],"w-100 p-1"])},[ae,(r(!0),d(y,null,g(b.semesters,(a,m)=>(r(),d("option",{key:m},l(a),1))),128))],2),[[x,o(t).semester]])]),e("div",oe,[ne,p(e("select",{"onUpdate:modelValue":s[2]||(s[2]=a=>o(t).status=a),required:"",name:"status",class:S([["ay-form__input",o(t).system_default==="no"&&"ay-form__input--disabled"],"w-100 p-1"])},[re,(r(!0),d(y,null,g(b.statuses,(a,m)=>(r(),d("option",{key:m},l(a),1))),128))],2),[[x,o(t).status]])]),e("div",de,[ce,p(e("select",{"onUpdate:modelValue":s[3]||(s[3]=a=>o(t).system_default=a),required:"",name:"system_default",class:"w-100 p-1"},[ie,(r(!0),d(y,null,g(b.systemDefaults,(a,m)=>(r(),d("option",{key:m},l(a),1))),128))],512),[[x,o(t).system_default]])])]),o(w)?(r(),d("div",le,[e("p",ue,l(o(w)),1)])):P("",!0),e("div",me,[e("div",_e,[Y(i,{to:"/admin/academic-year",class:"m-2 text-danger fw-medium"},{default:G(()=>[H(l(f.formType==="create"?"Back":"Cancel"),1)]),_:1}),pe])])],40,W)])],64)}}},ve=B(ye,[["__scopeId","data-v-b8551daa"]]);export{ve as _};
