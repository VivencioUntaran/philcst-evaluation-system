import{_ as D,r as T,q as A,v as b,c as a,a as e,y as E,z as $,A as N,x as c,b as v,w as x,F as B,D as I,e as L,o,d as w,t as u,B as m,p as V,f as Y}from"./entry.b4168997.js";import{u as j}from"./useAPI.05844c13.js";const d=r=>(V("data-v-4ed58047"),r=r(),Y(),r),z={class:"transition"},M=d(()=>e("nav",null,[e("h2",null,"Academic Year")],-1)),F={class:"bgCard"},q=["onSubmit"],G=d(()=>e("br",null,null,-1)),O={key:0,class:"table-container"},P={class:"table position-relative text-start"},U=d(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Academic Year "),e("th",{scope:"col"},"Semester"),e("th",{scope:"col"},"Status"),e("th",{scope:"col"},"System Default"),e("th",{scope:"col"},"Action")])],-1)),H={key:0},J={class:"d-flex flex-wrap"},K=["onClick"],Q={key:1},R=d(()=>e("p",null,"No records found.",-1)),W=[R],X={key:1,class:"spinner-border text-primary",role:"status"},Z=d(()=>e("span",{class:"visually-hidden"},"Loading...",-1)),ee=[Z],te={__name:"index",setup(r){const p=j(),l=T(!1);A(async()=>{await k(),l.value=!0});async function k(){await g()}let i=b([]);async function g(){i=(await p({url:"/admin/academic-years",method:"GET",headers:{"Content-Type":"application/json"}})).data.records}function f(s,n){return n==="status"?s.status==="open"?"academic-year__status--green":"academic-year__status--gray":s.system_default==="yes"?"academic-year__status--green":"academic-year__status--gray"}const y=b({keyword:""});async function h(){l.value=!1,i=(await p({url:"admin/academic-years/search",method:"POST",headers:{"Content-Type":"application/json"},data:y})).data.records,l.value=!0}async function S(s){const n=`${s.year} (${s.semester} semester)`;if(confirm(`Are you sure you want to delete ${n}?`))try{const _=await p({url:`admin/academic-years/${s.id}/delete`,method:"DELETE",headers:{"Content-Type":"application/json"}});alert("Data has been deleted"),h()}catch{console.log("an error occured")}}return(s,n)=>{const _=L;return o(),a("div",null,[e("div",z,[M,e("div",F,[e("form",{action:"",onSubmit:E(h,["prevent"])},[$(e("input",{class:"cstm-input",type:"text",placeholder:"Search","onUpdate:modelValue":n[0]||(n[0]=t=>c(y).keyword=t)},null,512),[[N,c(y).keyword]]),e("button",{type:"submit",onClick:h,class:"btn-yellow mx-2 px-3 py-2"}," Search ")],40,q),G,v(_,{class:"btn-add mx-2 px-3 py-2",to:"/admin/academic-year/create"},{default:x(()=>[w(" +Add New ")]),_:1}),c(l)?(o(),a("div",O,[e("table",P,[U,c(i).length?(o(),a("tbody",H,[(o(!0),a(B,null,I(c(i),(t,C)=>(o(),a("tr",{key:C},[e("td",null,u(t.year),1),e("td",null,u(t.semester),1),e("td",{class:m(["academic-year__status",f(t,"status")])},u(t.status),3),e("td",{class:m(["academic-year__status",f(t,"system_default")])},u(t.system_default),3),e("td",J,[v(_,{class:"edit-btn m-1",to:`/admin/academic-year/${t.id}/edit`},{default:x(()=>[w(" Edit ")]),_:2},1032,["to"]),e("button",{class:m(["m-1",["delete-btn",t.evaluation_entries.length&&"btn-disabled",t.system_default.toLowerCase()==="yes"&&"btn-disabled"]]),onClick:se=>S(t)}," Delete",10,K)])]))),128))])):(o(),a("tbody",Q,W))])])):(o(),a("div",X,ee))])])])}}},ne=D(te,[["__scopeId","data-v-4ed58047"]]);export{ne as default};
